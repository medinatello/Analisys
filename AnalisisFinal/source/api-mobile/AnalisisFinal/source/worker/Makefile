.PHONY: help run deps tidy test send-test-message

# Variables
GO := go

help: ## Mostrar ayuda
	@echo "Comandos disponibles:"
	@echo "  make run              - Ejecutar el worker"
	@echo "  make deps             - Instalar dependencias"
	@echo "  make tidy             - Limpiar dependencias"
	@echo "  make send-test-message - Enviar mensaje de prueba a RabbitMQ"

run: ## Ejecutar el worker
	@echo "ğŸ”„ Ejecutando Worker..."
	@echo "   AsegÃºrate de que RabbitMQ estÃ© corriendo en localhost:5672"
	@$(GO) run cmd/main.go

deps: ## Instalar dependencias
	@echo "ğŸ“¦ Instalando dependencias..."
	@$(GO) mod download
	@echo "âœ… Dependencias instaladas"

tidy: ## Limpiar dependencias
	@echo "ğŸ§¹ Limpiando dependencias..."
	@$(GO) mod tidy
	@echo "âœ… Dependencias limpiadas"

send-test-message: ## Enviar mensaje de prueba a RabbitMQ
	@echo "ğŸ“¨ Enviando mensaje de prueba..."
	@$(GO) run scripts/send_test_message.go
