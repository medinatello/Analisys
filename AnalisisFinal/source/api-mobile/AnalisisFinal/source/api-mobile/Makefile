.PHONY: help swagger run swagger-ui deps tidy clean

# Variables
SWAG := $(shell command -v swag 2> /dev/null || echo ~/go/bin/swag)
GO := go

help: ## Mostrar ayuda
	@echo "Comandos disponibles:"
	@echo "  make swagger     - Generar documentaciÃ³n Swagger"
	@echo "  make run         - Ejecutar la API"
	@echo "  make swagger-ui  - Generar Swagger y ejecutar la API"
	@echo "  make deps        - Instalar dependencias"
	@echo "  make tidy        - Limpiar dependencias"
	@echo "  make clean       - Limpiar archivos generados"

swagger: ## Generar documentaciÃ³n Swagger
	@echo "ðŸ”¨ Generando documentaciÃ³n Swagger..."
	@$(SWAG) init -g cmd/main.go -o docs --parseDependency --parseInternal --parseDepth 2
	@echo "âœ… DocumentaciÃ³n Swagger generada en ./docs/"

run: ## Ejecutar la API
	@echo "ðŸš€ Ejecutando API en puerto 8080..."
	@$(GO) run cmd/main.go

swagger-ui: swagger run ## Generar Swagger y ejecutar la API

deps: ## Instalar dependencias
	@echo "ðŸ“¦ Instalando dependencias..."
	@$(GO) mod download
	@echo "âœ… Dependencias instaladas"

tidy: ## Limpiar dependencias
	@echo "ðŸ§¹ Limpiando dependencias..."
	@$(GO) mod tidy
	@echo "âœ… Dependencias limpiadas"

clean: ## Limpiar archivos generados
	@echo "ðŸ§¹ Limpiando archivos generados..."
	@rm -rf docs/
	@echo "âœ… Archivos limpiados"
